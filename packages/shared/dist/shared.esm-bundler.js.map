{"version":3,"file":"shared.esm-bundler.js","sources":["../../../node_modules/.pnpm/@chris-zhu+utils@0.0.7/node_modules/@chris-zhu/utils/dist/index.mjs","../src/index.ts"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\n// src/array/index.ts\nfunction toArray(array) {\n  array = array || [];\n  if (Array.isArray(array))\n    return array;\n  return [array];\n}\nfunction uniq(array) {\n  return Array.from(new Set(array));\n}\nfunction at(array, index) {\n  const len = array.length;\n  if (!len)\n    return void 0;\n  if (index < 0)\n    index += len;\n  return array[index];\n}\nfunction last(array) {\n  return at(array, -1);\n}\nfunction remove(array, value) {\n  if (!array)\n    return false;\n  const index = array.indexOf(value);\n  if (index >= 0) {\n    array.splice(index, 1);\n    return true;\n  }\n  return false;\n}\nfunction range(...args) {\n  let start, stop, step;\n  if (args.length === 1) {\n    start = 0;\n    step = 1;\n    [stop] = args;\n  } else {\n    [start, stop, step = 1] = args;\n  }\n  const arr = [];\n  let current = start;\n  while (current < stop) {\n    arr.push(current);\n    current += step || 1;\n  }\n  return arr;\n}\nfunction move(arr, from, to) {\n  arr.splice(to, 0, arr.splice(from, 1)[0]);\n  return arr;\n}\nfunction nest(items, id = null, link = \"parent_id\") {\n  return items.filter((item) => item[link] === id).map((item) => __spreadProps(__spreadValues({}, item), { children: nest(items, item.id) }));\n}\nfunction average(...nums) {\n  return nums.reduce((acc, val) => acc + val, 0) / nums.length;\n}\nfunction shuffle(arr) {\n  let m = arr.length;\n  while (m) {\n    const i = Math.floor(Math.random() * m--);\n    [arr[m], arr[i]] = [arr[i], arr[m]];\n  }\n  return arr;\n}\n\n// src/base/index.ts\nvar toTypeString = (v) => Object.prototype.toString.call(v);\nvar getRandom = (min, max) => Math.floor(Math.random() * max + min);\nvar toNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\n\n// src/is/is.ts\nvar isDef = (val) => typeof val !== \"undefined\";\nvar isBoolean = (val) => typeof val === \"boolean\";\nvar isFunction = (val) => typeof val === \"function\";\nvar isNumber = (val) => typeof val === \"number\";\nvar isString = (val) => typeof val === \"string\";\nvar isObject = (val) => val !== null && typeof val === \"object\";\nvar isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nvar isArray = Array.isArray;\nvar isMap = (val) => toTypeString(val) === \"[object Map]\";\nvar isSet = (val) => toTypeString(val) === \"[object Set]\";\nvar isDate = (val) => val instanceof Date;\nvar isRegExp = (val) => val instanceof RegExp;\nvar isSymbol = (val) => typeof val === \"symbol\";\nvar isPromise = (val) => isObject(val) && isFunction(val.then) && isFunction(val.catch);\nvar isValue = (val) => val !== void 0 && val !== null;\nvar NO = () => false;\n\n// src/is/env.ts\nvar isWindow = (v) => typeof window !== \"undefined\" && toTypeString(v) === \"[object Window]\";\nvar inBrowser = typeof window !== \"undefined\";\nvar isWechatBrowser = () => (navigator == null ? void 0 : navigator.userAgent.toLowerCase()).includes(\"micromessenger\");\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf(\"msie 9.0\") > 0;\nvar isEdge = UA && UA.indexOf(\"edge/\") > 0;\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// src/object/index.ts\nfunction deepClone(origin) {\n  if (isArray(origin))\n    return origin.map((child) => deepClone(child));\n  if (isObject(origin)) {\n    return Object.fromEntries(Object.entries(origin).map(([k, v]) => [k, deepClone(v)]));\n  }\n  return origin;\n}\nfunction deepClone2(origin, hash = /* @__PURE__ */ new WeakMap()) {\n  if (isObject(origin)) {\n    if (hash.has(origin))\n      return hash.get(origin);\n    const target = isArray(origin) ? [] : {};\n    hash.set(origin, target);\n    Object.entries(origin).forEach(([k, v]) => {\n      if (isRegExp(v))\n        target[k] = new RegExp(v);\n      else if (isDate(v))\n        target[k] = new Date(v);\n      else\n        target[k] = deepClone2(v, hash);\n    });\n    return target;\n  }\n  return origin;\n}\nvar extend = Object.assign;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar hasOwn = (val, key) => {\n  if (val == null)\n    return false;\n  return hasOwnProperty.call(val, key);\n};\n\n// src/function/index.ts\nvar noop = () => {\n};\nfunction once(fn) {\n  let called = false;\n  return function(...args) {\n    if (!called) {\n      called = true;\n      return fn(...args);\n    }\n  };\n}\nvar Pubsub = class {\n  constructor() {\n    this._topics = {};\n    this.subId = -1;\n  }\n  get topics() {\n    return this._topics;\n  }\n  publish(topic, args) {\n    const subscribers = this._topics[topic];\n    if (!subscribers || subscribers.length === 0)\n      return;\n    let len = subscribers.length;\n    while (len--)\n      subscribers[len].func(topic, args);\n    return this;\n  }\n  subscribe(topic, func) {\n    if (!this._topics[topic])\n      this._topics[topic] = [];\n    const token = ++this.subId;\n    this._topics[topic].push({ token, func });\n    return token;\n  }\n  unsubscribe(token) {\n    for (const [, subscribers] of Object.entries(this._topics)) {\n      const index = subscribers.findIndex(({ token: subToken }) => subToken === token);\n      if (index === -1)\n        continue;\n      subscribers.splice(index, 1);\n    }\n  }\n};\nexport {\n  NO,\n  Pubsub,\n  UA,\n  at,\n  average,\n  deepClone,\n  deepClone2,\n  extend,\n  getRandom,\n  hasOwn,\n  inBrowser,\n  isArray,\n  isBoolean,\n  isChrome,\n  isDate,\n  isDef,\n  isEdge,\n  isFF,\n  isFunction,\n  isIE,\n  isIE9,\n  isMap,\n  isNumber,\n  isObject,\n  isPhantomJS,\n  isPlainObject,\n  isPromise,\n  isRegExp,\n  isSet,\n  isString,\n  isSymbol,\n  isValue,\n  isWechatBrowser,\n  isWindow,\n  last,\n  move,\n  nest,\n  noop,\n  once,\n  range,\n  remove,\n  shuffle,\n  toArray,\n  toNumber,\n  toTypeString,\n  uniq\n};\n","import { isString } from '@chris-zhu/utils'\n\nexport {\n  isMap, isSet, isArray, toTypeString, hasOwn, isDate, isFunction,\n  isString, isSymbol, isObject, extend, noop as NOOP\n} from '@chris-zhu/utils'\n\nexport const isIntegerKey = (key: unknown) =>\n  isString(key)\n  && key !== 'NaN'\n  && key[0] !== '-'\n  && `${parseInt(key, 10)}` === key\n\nexport const hasChanged = (value: any, oldValue: any): boolean =>\n  value !== oldValue\n\nexport const objectToString = Object.prototype.toString\n\nexport const warn = console.warn\n"],"names":[],"mappings":"AAuFA;AACG,IAAC,YAAY,GAAG,CAAC,CAAC,KAAK,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE;AAUzD,IAAC,UAAU,GAAG,CAAC,GAAG,KAAK,OAAO,GAAG,KAAK,WAAW;AAEjD,IAAC,QAAQ,GAAG,CAAC,GAAG,KAAK,OAAO,GAAG,KAAK,SAAS;AAC7C,IAAC,QAAQ,GAAG,CAAC,GAAG,KAAK,GAAG,KAAK,IAAI,IAAI,OAAO,GAAG,KAAK,SAAS;AAE7D,IAAC,OAAO,GAAG,KAAK,CAAC,QAAQ;AACzB,IAAC,KAAK,GAAG,CAAC,GAAG,KAAK,YAAY,CAAC,GAAG,CAAC,KAAK,eAAe;AACvD,IAAC,KAAK,GAAG,CAAC,GAAG,KAAK,YAAY,CAAC,GAAG,CAAC,KAAK,eAAe;AACvD,IAAC,MAAM,GAAG,CAAC,GAAG,KAAK,GAAG,YAAY,KAAK;AAEvC,IAAC,QAAQ,GAAG,CAAC,GAAG,KAAK,OAAO,GAAG,KAAK,SAAS;AAOhD,IAAI,SAAS,GAAG,OAAO,MAAM,KAAK,WAAW,CAAC;AAE9C,IAAI,EAAE,GAAG,SAAS,IAAI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;AACpD,EAAE,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE;AAC7B,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,EAAE;AAC7C,IAAI,MAAM,GAAG,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC5B,EAAE,IAAI,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO;AACrC,EAAE,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE,EAAE;AAClC,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,gBAAgB,EAAE;AA6BzC,IAAC,MAAM,GAAG,MAAM,CAAC,OAAO;AAC3B,IAAI,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC;AAClD,IAAC,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,KAAK;AAC3B,EAAE,IAAI,GAAG,IAAI,IAAI;AACjB,IAAI,OAAO,KAAK,CAAC;AACjB,EAAE,OAAO,cAAc,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACvC,EAAE;AACF;AACA;AACG,IAAC,IAAI,GAAG,MAAM;AACjB;;MC3Ja,YAAY,GAAG,CAAC,GAAY,KACvC,QAAQ,CAAC,GAAG,CAAC;OACV,GAAG,KAAK,KAAK;OACb,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG;OACd,GAAG,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,KAAK,IAAG;MAEtB,UAAU,GAAG,CAAC,KAAU,EAAE,QAAa,KAClD,KAAK,KAAK,SAAQ;MAEP,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,SAAQ;MAE1C,IAAI,GAAG,OAAO,CAAC;;;;"}